var pages;document.addEventListener("DOMContentLoaded",function(){chrome.storage.local.get("pages",function(e){e.pages&&"object"==typeof e.pages?(pages=e.pages,console.log("if")):chrome.storage.local.set({pages:{Pro:{inner:""},Con:{inner:""},Other:{inner:""}}},function(){pages={Pro:{inner:""},Con:{inner:""},Other:{inner:""}},console.log("else")});var t=document.getElementById("select");const o=document.getElementById("navList");var n=document.getElementById("replace");for(let e in pages){$(document).trigger("DOMContentLoaded");document.getElementById("getStored");var c=document.createElement("option");c.textContent=e,t.appendChild(c);var l=document.createElement("dt");l.className="navItem newCat",o.appendChild(l);var a=document.createElement("a");l.appendChild(a),a.textContent=e,a.setAttribute("href","#"),a.setAttribute("id",e),l.addEventListener("click",function(){r();var t=`\n  <h1 id = "pastCards">${e}</h1>\n\t\t\x3c!-- <textarea class = "cardTextArea" id = "cardHistory" spellcheck="false"></textarea> --\x3e\n\t\t<div class = "alignCenter catControl" id ="bgSticky">\n\t\t\t<button id = "exportAll" class="gap-10">Copy All</button>\n\t\t\t<button id = "getStored" class="gap-10">See ${e.length<=9?e:"Past"} Cards</button>\n\t\t\t<button id = "clearStorage">Clear History</button>\n\t\t</div>\n\t\t<div id = "appendedTo"></div>\n  `;$(document).on("click","#clearStorage",function(){var t={};t[e]=[],chrome.storage.local.set(t),o.innerHTML=""}),$(document).on("click","#exportAll",function(){var t="";chrome.storage.local.get(e,function(o){for(let n=0;n<o[e].length;n++)t+=o[e][n],console.log("Hello "+o[e][n]);navigator.clipboard.writeText(t).then(function(){console.log("copied"+t)})})});document.getElementById("getStored");n.innerHTML=t,console.log(`${e} clicked`),console.log(e+" triggered");var o=document.getElementById("appendedTo");$(document).on("click","#getStored",function(){o.innerHTML="",console.log("getstored clicked"),chrome.storage.local.get(e,function(t){var n=t[`${e}`];console.log(n);for(let t=n.length-1;t>=0;t--){const c=document.createElement("textarea");c.setAttribute("id",`textarea${t}`);const l=document.createElement("button"),a=document.createElement("object"),r=document.createElement("button"),d=document.createElement("object"),s=document.createElement("div");a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" height = "29px" fill = "var(--main-text-color)"><path d="M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"/></svg>',d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" height = "29px" fill = "var(--main-text-color)"><path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"/></svg>',c.className="oldCardContent",a.className="clipboard",d.className="trash",r.className="deleteBtn gap-10",r.id=`deleteBtn${t}`,l.setAttribute("class","copyBtn"),l.setAttribute("id",`copyBtn${t}`);const i=document.getElementById(`textarea${t}`);s.className="btnControlContainer",console.log("new textarea"),c.value=n[t]+"\n",o.appendChild(c),o.appendChild(c),o.appendChild(s),s.appendChild(r),s.appendChild(l),r.appendChild(d),l.appendChild(a),c.setAttribute("spellcheck","false"),$(document).on("click",`#copyBtn${t}`,function(){event.preventDefault(),navigator.clipboard.writeText(c.value).then(function(){console.log("clipboard successfully set"),console.log(c.value)},function(){i.select(),document.execCommand("copy"),console.log("Second Try for copy text")})}),$(document).on("click",`#deleteBtn${t}`,function(){n.splice(t,1),c.remove(),r.remove(),l.remove();var o={};o[e]=n,chrome.storage.local.set(o,function(){console.log("value is set to "),console.log(o)})})}})})})}function r(){changing_style=document.getElementById("style"),chrome.storage.sync.get("color1",e=>{chrome.storage.sync.get("color2",t=>{chrome.storage.sync.get("color3",o=>{chrome.storage.sync.get("bgColor",n=>{style.innerHTML=`\n          :root {\n            ${null!=e.color1?"--main-text-color: "+e.color1+";":""}\n            ${null!=o.color3?"--accent-color: "+o.color3+";":""}\n            ${null!=t.color2?"--button-background-color: "+t.color2+";":""}\n            ${null!=n.bgColor?"--background-color: "+n.bgColor+";":""}\n\n          }\n          `})})})})}document.addEventListener("DOMContentLoaded",r())})});